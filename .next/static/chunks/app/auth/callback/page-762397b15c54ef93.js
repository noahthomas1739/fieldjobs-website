(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6769],{5650:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>c});var t=r(5155),a=r(2115),l=r(3579),n=r(5695);function i(){let e=(0,n.useRouter)(),s=(0,n.useSearchParams)(),r=(0,l.createClientComponentClient)(),[i,c]=(0,a.useState)("verifying"),[o,d]=(0,a.useState)("Processing authentication...");return(0,a.useEffect)(()=>{(async()=>{try{let t=s.get("code"),a=s.get("token_hash"),l=s.get("type");if(console.log("Processing auth callback with:",{code:t,tokenHash:a,type:l}),t){console.log("Processing OAuth callback..."),d("Completing sign in...");let{data:s,error:a}=await r.auth.exchangeCodeForSession(t);if(a){console.error("OAuth callback failed:",a),c("error"),d("Sign in failed. Please try again.");return}if(s.user){console.log("OAuth sign in successful for:",s.user.email),c("success"),d("Sign in successful!"),setTimeout(()=>{var r,t,a,l;(null==(t=s.user)||null==(r=t.user_metadata)?void 0:r.account_type)?(null==(l=s.user)||null==(a=l.user_metadata)?void 0:a.account_type)==="employer"?e.push("/employer"):e.push("/dashboard"):e.push("/auth/account-type")},1500);return}}else if(a&&l){console.log("Processing email verification..."),d("Confirming your email...");let{data:s,error:t}=await r.auth.verifyOtp({token_hash:a,type:l});if(t){console.error("Email verification failed:",t),c("error"),d("Email verification failed. Please try again.");return}if(s.user){console.log("Email confirmed successfully for:",s.user.email),c("success"),d("Email confirmed successfully!"),setTimeout(()=>{var r,t,a,l;(null==(t=s.user)||null==(r=t.user_metadata)?void 0:r.account_type)?(null==(l=s.user)||null==(a=l.user_metadata)?void 0:a.account_type)==="employer"?e.push("/employer"):e.push("/dashboard"):e.push("/auth/account-type")},1500);return}}c("error"),d("Invalid authentication link.")}catch(e){console.error("Auth callback error:",e),c("error"),d("An unexpected error occurred.")}})()},[e,r,s]),(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,t.jsx)("nav",{className:"bg-gray-900 text-white sticky top-0 z-50",children:(0,t.jsx)("div",{className:"max-w-6xl mx-auto px-4",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:"FieldJobs"}),(0,t.jsx)("div",{className:"flex items-center space-x-4",children:(0,t.jsx)("a",{href:"/auth/login",className:"border border-white text-white hover:bg-white hover:text-gray-900 px-4 py-2 rounded transition-colors",children:"Login"})})]})})}),(0,t.jsx)("div",{className:"flex items-center justify-center px-4 py-12",children:(0,t.jsx)("div",{className:"max-w-md w-full",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:["verifying"===i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Authenticating"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:o})]}),"success"===i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Success!"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:o}),(0,t.jsx)("p",{className:"text-gray-600 mb-8",children:"Redirecting you now..."}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-orange-500 h-2 rounded-full animate-pulse",style:{width:"70%"}})})]}),"error"===i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)("svg",{className:"w-10 h-10 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Authentication Failed"}),(0,t.jsx)("p",{className:"text-gray-600 mb-8",children:o}),(0,t.jsx)("a",{href:"/auth/login",className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-semibold py-4 px-6 rounded-lg transition-colors inline-block",children:"Go to Login"})]})]})})})]})}function c(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,t.jsx)("nav",{className:"bg-gray-900 text-white sticky top-0 z-50",children:(0,t.jsx)("div",{className:"max-w-6xl mx-auto px-4",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:"FieldJobs"}),(0,t.jsx)("div",{className:"flex items-center space-x-4",children:(0,t.jsx)("a",{href:"/auth/login",className:"border border-white text-white hover:bg-white hover:text-gray-900 px-4 py-2 rounded transition-colors",children:"Login"})})]})})}),(0,t.jsx)("div",{className:"flex items-center justify-center px-4 py-12",children:(0,t.jsx)("div",{className:"max-w-md w-full",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Loading..."}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Preparing authentication"})]})})})]}),children:(0,t.jsx)(i,{})})}},5695:(e,s,r)=>{"use strict";var t=r(8999);r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(s,{useSearchParams:function(){return t.useSearchParams}})},6865:(e,s,r)=>{Promise.resolve().then(r.bind(r,5650))}},e=>{var s=s=>e(e.s=s);e.O(0,[3579,8441,1684,7358],()=>s(6865)),_N_E=e.O()}]);