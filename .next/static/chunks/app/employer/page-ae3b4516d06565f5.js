(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6282],{1230:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var r=t(5155),a=t(3494),i=t(2115),l=t(5695),n=t(6874),o=t.n(n);let d=e=>{let{user:s,subscription:t,onSubscriptionUpdate:a}=e,[l,n]=(0,i.useState)("overview"),[o,d]=(0,i.useState)(!1),[c,x]=(0,i.useState)([]),[u,m]=(0,i.useState)(!1),[h,g]=(0,i.useState)(!1),[p,b]=(0,i.useState)([]);(0,i.useEffect)(()=>{"billing"===l&&(null==t?void 0:t.stripe_customer_id)&&j(),(null==s?void 0:s.id)&&y()},[l,t,null==s?void 0:s.id]);let j=async()=>{try{d(!0);let e=await fetch("/api/stripe/manage-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"get_billing_history",userId:s.id})}),t=await e.json();t.success&&x(t.billingHistory)}catch(e){console.error("Error loading billing history:",e)}finally{d(!1)}},y=async()=>{try{let e=await fetch("/api/subscription-schedule-status?userId=".concat(s.id)),t=await e.json();t.success&&t.scheduledChanges&&(b(t.scheduledChanges),console.log("\uD83D\uDCC5 Loaded scheduled changes:",t.scheduledChanges))}catch(e){console.error("Error loading scheduled changes:",e)}},v=async()=>{try{d(!0);let e=await fetch("/api/stripe/manage-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"cancel",userId:s.id})}),t=await e.json();t.success?(alert("✅ ".concat(t.message)),a(),m(!1)):alert("Error cancelling subscription. Please try again.")}catch(e){console.error("Error cancelling subscription:",e),alert("Error cancelling subscription. Please try again.")}finally{d(!1)}},f=async()=>{try{d(!0);let e=await fetch("/api/stripe/manage-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"reactivate",userId:s.id})});(await e.json()).success?(alert("✅ Subscription reactivated successfully!"),a()):alert("Error reactivating subscription. Please try again.")}catch(e){console.error("Error reactivating subscription:",e),alert("Error reactivating subscription. Please try again.")}finally{d(!1)}},N=async(e,t)=>{try{d(!0);let r=await fetch("/api/stripe/manage-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"upgrade_immediate",userId:s.id,newPriceId:e,newPlanType:t.toLowerCase()})});(await r.json()).success?(alert("✅ Successfully upgraded to ".concat(t," plan!")),a(),y(),g(!1)):alert("Error upgrading subscription. Please try again.")}catch(e){console.error("Error upgrading subscription:",e),alert("Error upgrading subscription. Please try again.")}finally{d(!1)}},w=async(e,t)=>{try{d(!0);let r=await fetch("/api/stripe/manage-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"downgrade_end_cycle",userId:s.id,newPriceId:e,newPlanType:t.toLowerCase()})}),i=await r.json();i.success?(alert("✅ ".concat(i.message)),a(),y()):alert("Error scheduling downgrade: ".concat(i.error||"Please try again."))}catch(e){console.error("Error scheduling downgrade:",e),alert("Error scheduling downgrade. Please try again.")}finally{d(!1)}},P=async()=>{try{d(!0);let e=await fetch("/api/stripe/manage-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"get_billing_portal",userId:s.id})}),t=await e.json();t.success?window.open(t.url,"_blank"):alert("Error accessing billing portal. Please try again.")}catch(e){console.error("Error accessing billing portal:",e),alert("Error accessing billing portal. Please try again.")}finally{d(!1)}},_=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),C=e=>"$".concat((e/100).toFixed(2)),E=()=>(null==t?void 0:t.current_period_end)?_(t.current_period_end):"N/A",S=(null==t?void 0:t.status)==="cancelled"||(null==t?void 0:t.cancelled_at);return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-6",children:"Subscription Management"}),(0,r.jsx)("div",{className:"flex gap-2 mb-6 border-b",children:[{id:"overview",label:"Overview"},{id:"plans",label:"Change Plan"},{id:"billing",label:"Billing History"}].map(e=>(0,r.jsx)("button",{onClick:()=>n(e.id),className:"px-4 py-2 font-medium transition-colors ".concat(l===e.id?"text-orange-500 border-b-2 border-orange-500":"text-gray-500 hover:text-gray-700"),children:e.label},e.id))}),"overview"===l&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"p-6 rounded-lg ".concat(S?"bg-red-50 border border-red-200":"bg-gradient-to-r from-orange-500 to-orange-600 text-white"),children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-xl font-bold ".concat(S?"text-red-800":"text-white"),children:[(e=>({free:"Free Account",starter:"Starter Plan",professional:"Professional Plan",enterprise:"Enterprise Plan"})[e]||e)((null==t?void 0:t.plan_type)||"free"),S&&(0,r.jsx)("span",{className:"ml-2 text-sm bg-red-600 text-white px-2 py-1 rounded-full",children:"Cancelled"})]}),(0,r.jsx)("div",{className:"".concat(S?"text-red-700":"text-white"),children:(null==t?void 0:t.plan_type)==="free"?"Upgrade to unlock premium features":S?"Active until ".concat(E()):"".concat(C((null==t?void 0:t.price)||0),"/month • Next billing: ").concat(E())})]}),(null==t?void 0:t.plan_type)!=="free"&&(0,r.jsx)("div",{className:"flex gap-2",children:S?(0,r.jsx)("button",{onClick:f,disabled:o,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:o?"Processing...":"Reactivate"}):(0,r.jsx)("button",{onClick:()=>g(!0),className:"bg-white text-orange-500 hover:bg-gray-50 px-4 py-2 rounded-lg",children:"Change Plan"})})]})}),p.length>0&&(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"\uD83D\uDCC5 Upcoming Changes"}),p.map((e,s)=>(0,r.jsxs)("div",{className:"text-blue-700",children:["Your plan will change from ",(0,r.jsx)("strong",{children:e.currentPlan})," to ",(0,r.jsx)("strong",{children:e.newPlan})," on"," ",(0,r.jsx)("strong",{children:_(e.effectiveDate)})]},e.id||s))]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-500",children:(null==t?void 0:t.active_jobs_limit)===999999?"∞":(null==t?void 0:t.active_jobs_limit)||0}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Active Job Limit"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-500",children:(null==t?void 0:t.credits)===999999?"∞":(null==t?void 0:t.credits)||0}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Resume Credits"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-500",children:(null==t?void 0:t.plan_type)==="free"?"30 days":"∞"}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Job Duration"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"font-semibold",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,r.jsx)("button",{onClick:P,disabled:o||(null==t?void 0:t.plan_type)==="free",className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Manage Payment Methods"}),(0,r.jsx)("button",{onClick:()=>n("billing"),disabled:(null==t?void 0:t.plan_type)==="free",className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"View Billing History"}),(0,r.jsx)("button",{onClick:()=>n("plans"),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg",children:(null==t?void 0:t.plan_type)==="free"?"Upgrade Plan":"Change Plan"})]})]})]}),"plans"===l&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold",children:"Choose Your Plan"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsx)("div",{className:"border-2 rounded-lg p-6 ".concat((null==t?void 0:t.plan_type)==="starter"?"border-orange-500 bg-orange-50":"border-gray-200"),children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-xl font-bold mb-2",children:"Starter"}),(0,r.jsx)("div",{className:"text-3xl font-bold text-orange-500 mb-2",children:"$249"}),(0,r.jsx)("div",{className:"text-gray-600 mb-4",children:"per month"}),(0,r.jsxs)("ul",{className:"text-left space-y-2 mb-6 text-sm",children:[(0,r.jsx)("li",{children:"✓ 5 active job postings"}),(0,r.jsx)("li",{children:"✓ Jobs stay active indefinitely"}),(0,r.jsx)("li",{children:"✓ 10 resume credits"}),(0,r.jsx)("li",{children:"✓ Standard support"})]}),(null==t?void 0:t.plan_type)==="starter"?(0,r.jsx)("div",{className:"bg-orange-500 text-white py-2 px-4 rounded-lg",children:"Current Plan"}):(null==t?void 0:t.plan_type)==="free"?(0,r.jsx)("button",{onClick:()=>N("price_1Rk5wTRC3IxXIgoOJXQeNds5","Starter"),disabled:o,className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 px-4 rounded-lg disabled:opacity-50",children:o?"Processing...":"Upgrade Now"}):(0,r.jsx)("button",{onClick:()=>w("price_1Rk5wTRC3IxXIgoOJXQeNds5","Starter"),disabled:o,className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg disabled:opacity-50",children:o?"Processing...":"Downgrade"})]})}),(0,r.jsxs)("div",{className:"border-2 rounded-lg p-6 relative ".concat((null==t?void 0:t.plan_type)==="professional"?"border-orange-500 bg-orange-50":"border-orange-500"),children:[(null==t?void 0:t.plan_type)!=="professional"&&(0,r.jsx)("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-orange-500 text-white px-4 py-1 rounded-full text-sm font-bold",children:"MOST POPULAR"}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-xl font-bold mb-2",children:"Professional"}),(0,r.jsx)("div",{className:"text-3xl font-bold text-orange-500 mb-2",children:"$599"}),(0,r.jsx)("div",{className:"text-gray-600 mb-4",children:"per month"}),(0,r.jsxs)("ul",{className:"text-left space-y-2 mb-6 text-sm",children:[(0,r.jsx)("li",{children:"✓ 15 active job postings"}),(0,r.jsx)("li",{children:"✓ Jobs stay active indefinitely"}),(0,r.jsx)("li",{children:"✓ 25 resume credits"}),(0,r.jsx)("li",{children:"✓ Priority support"}),(0,r.jsx)("li",{children:"✓ Featured job placement"})]}),(null==t?void 0:t.plan_type)==="professional"?(0,r.jsx)("div",{className:"bg-orange-500 text-white py-2 px-4 rounded-lg",children:"Current Plan"}):(0,r.jsx)("button",{onClick:()=>(null==t?void 0:t.plan_type)==="enterprise"?w("price_1Rk5xGRC3IxXIgoOKFM0DRZd","Professional"):N("price_1Rk5xGRC3IxXIgoOKFM0DRZd","Professional"),disabled:o,className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 px-4 rounded-lg disabled:opacity-50",children:o?"Processing...":(null==t?void 0:t.plan_type)==="enterprise"?"Downgrade":"Upgrade Now"})]})]}),(0,r.jsx)("div",{className:"border-2 rounded-lg p-6 ".concat((null==t?void 0:t.plan_type)==="enterprise"?"border-orange-500 bg-orange-50":"border-gray-200"),children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-xl font-bold mb-2",children:"Enterprise"}),(0,r.jsx)("div",{className:"text-3xl font-bold text-orange-500 mb-2",children:"$1,199"}),(0,r.jsx)("div",{className:"text-gray-600 mb-4",children:"per month"}),(0,r.jsxs)("ul",{className:"text-left space-y-2 mb-6 text-sm",children:[(0,r.jsx)("li",{children:"✓ Unlimited job postings"}),(0,r.jsx)("li",{children:"✓ Jobs stay active indefinitely"}),(0,r.jsx)("li",{children:"✓ Unlimited resume access"}),(0,r.jsx)("li",{children:"✓ Dedicated account manager"}),(0,r.jsx)("li",{children:"✓ Custom integrations"})]}),(null==t?void 0:t.plan_type)==="enterprise"?(0,r.jsx)("div",{className:"bg-orange-500 text-white py-2 px-4 rounded-lg",children:"Current Plan"}):(0,r.jsx)("button",{onClick:()=>N("price_1Rk5xzRC3IxXIgoO9EtZ0zny","Enterprise"),disabled:o,className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 px-4 rounded-lg disabled:opacity-50",children:o?"Processing...":"Upgrade Now"})]})})]})]}),"billing"===l&&(0,r.jsxs)("div",{className:"space-y-6",children:[(null==t?void 0:t.plan_type)!=="free"&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Subscription Management"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,r.jsx)("button",{onClick:P,disabled:o||(null==t?void 0:t.plan_type)==="free",className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Manage Payment Methods"}),S?(0,r.jsx)("button",{onClick:f,disabled:o,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:o?"Processing...":"Reactivate Subscription"}):(0,r.jsx)("button",{onClick:()=>m(!0),disabled:o,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Cancel Subscription"})]}),S&&(0,r.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,r.jsxs)("p",{className:"text-red-700 text-sm",children:["⚠️ Your subscription is cancelled and will end on ",E(),". You can reactivate it before then to continue your plan."]})})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold",children:"Billing History"}),(0,r.jsx)("button",{onClick:j,disabled:o,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:o?"Loading...":"Refresh"})]}),0===c.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCC4"}),(0,r.jsx)("p",{className:"text-gray-500",children:"No billing history available"})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full border border-gray-200 rounded-lg",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500",children:"Date"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500",children:"Description"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500",children:"Amount"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500",children:"Status"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-500",children:"Invoice"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200",children:c.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:_(e.date)}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.description}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:C(e.amount)}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("paid"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm",children:e.invoiceUrl&&(0,r.jsx)("a",{href:e.invoiceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700",children:"View Invoice"})})]},e.id))})]})})]}),u&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Cancel Subscription"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to cancel your subscription? Your account will remain active until the end of your current billing period (",E(),")."]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("button",{onClick:()=>m(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Keep Subscription"}),(0,r.jsx)("button",{onClick:v,disabled:o,className:"flex-1 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:o?"Processing...":"Yes, Cancel"})]})]})})]})};var c=t(9509);function x(){var e;let{user:s,loading:n}=(0,a.A)(),x=(0,l.useRouter)(),u=(0,l.useSearchParams)(),[m,h]=(0,i.useState)("overview"),[g,p]=(0,i.useState)(!0),[b,j]=(0,i.useState)(!0),[y,v]=(0,i.useState)([]),[f,N]=(0,i.useState)([]),[w,P]=(0,i.useState)({}),[_,C]=(0,i.useState)({}),[E,S]=(0,i.useState)({tier:"free",credits:0,activeJobs:0,stripeSubscriptionId:null}),[I,k]=(0,i.useState)(!1),[R,D]=(0,i.useState)(!0),[T,U]=(0,i.useState)(!1),[A,J]=(0,i.useState)([]),[O,L]=(0,i.useState)(!1),[F,B]=(0,i.useState)(null),[$,M]=(0,i.useState)({loading:!0,hasActiveSubscription:!1,currentPlan:"free",canPurchaseNew:!0}),[X,G]=(0,i.useState)(!1),[q,Y]=(0,i.useState)(!1),[H,z]=(0,i.useState)(!1),[V,W]=(0,i.useState)(null),[K,Q]=(0,i.useState)(null),[Z,ee]=(0,i.useState)(""),[es,et]=(0,i.useState)(null),[er,ea]=(0,i.useState)([]),[ei,el]=(0,i.useState)({keywords:"",location:"",classification:"",specialization:"",minExperience:"",maxExperience:"",industries:"",clearance:"",availableBy:"",minRate:"",maxRate:""}),[en,eo]=(0,i.useState)(!1),[ed,ec]=(0,i.useState)(0),[ex,eu]=(0,i.useState)(new Set),[em,eh]=(0,i.useState)({title:"",company:"",description:"",requirements:"",region:"",hourlyRate:"",duration:"",startDate:"",industry:"",classification:"",benefits:"",contactEmail:"",contactPhone:""}),[eg,ep]=(0,i.useState)(""),[eb,ej]=(0,i.useState)(""),[ey,ev]=(0,i.useState)(!1),[ef,eN]=(0,i.useState)(!1),ew=async()=>{try{if(!(null==s?void 0:s.id))return;let e=await fetch("/api/free-job/check-eligibility?userId=".concat(s.id)),t=await e.json();t.success&&k(t.eligible)}catch(e){console.error("Error checking free job eligibility:",e)}finally{D(!1)}},eP=async()=>{try{if(!(null==s?void 0:s.id))return;let e=await fetch("/api/free-job/upgrade-prompts?userId=".concat(s.id)),t=await e.json();if(t.success&&t.prompts.length>0){J(t.prompts);let e=t.prompts[0];B(e),L(!0)}}catch(e){console.error("Error checking upgrade prompts:",e)}},e_=async e=>{if(e.preventDefault(),null==s?void 0:s.id)try{p(!0);let e=await fetch("/api/free-job/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s.id,jobData:em})}),t=await e.json();t.success?(alert("\uD83C\uDF89 "+t.message),await eX(),k(!1),U(!1),eh({title:"",company:"",description:"",requirements:"",region:"",hourlyRate:"",duration:"",startDate:"",industry:"",classification:"",benefits:"",contactEmail:"",contactPhone:""})):alert("Error: "+t.error)}catch(e){console.error("Error creating free job:",e),alert("Error creating free job")}finally{p(!1)}},eC=async e=>{try{F&&await fetch("/api/free-job/upgrade-prompts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({promptId:F.id,action:e})}),L(!1),B(null),"upgrade"===e&&h("billing")}catch(e){console.error("Error handling prompt action:",e)}},eE=e=>({free:0,starter:1,growth:2,professional:3,enterprise:4})[e]||0,eS=async(e,t)=>{if(!(null==s?void 0:s.id))return void alert("Please log in to upgrade your subscription.");try{if(p(!0),!(null==E?void 0:E.stripeSubscriptionId))return void alert("No active subscription found. Please contact support.");let r=await fetch("/api/stripe/manage-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"upgrade_immediate",userId:s.id,newPriceId:e,newPlanType:t,subscriptionId:E.stripeSubscriptionId})}),a=await r.json();if(!r.ok)throw Error(a.error||"HTTP ".concat(r.status));a.success?(alert(a.message||"Upgrade successful!"),await eO(),window.location.reload()):alert(a.error||"Upgrade failed")}catch(e){console.error("Upgrade error:",e),alert("Upgrade failed: "+e.message)}finally{p(!1)}},eI=async(e,t)=>{if(!(null==s?void 0:s.id))return void alert("Please log in to manage your subscription.");try{if(!confirm("You'll keep your current features until your next billing date, then switch to ".concat(t,". Continue?")))return;if(!(null==E?void 0:E.stripeSubscriptionId))return void alert("No active subscription found. Please contact support.");p(!0);let r=await fetch("/api/stripe/manage-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"downgrade_end_cycle",userId:s.id,newPriceId:e,newPlanType:t,subscriptionId:E.stripeSubscriptionId})}),a=await r.json();if(!r.ok)throw Error(a.error||"HTTP ".concat(r.status));a.success?(alert(a.message||"Downgrade scheduled successfully!"),await eO()):alert(a.error||"Downgrade failed")}catch(e){console.error("Downgrade error:",e),alert("Downgrade failed: "+e.message)}finally{p(!1)}},ek=(e,s)=>{let t=E.tier||"free",a="free"!==E.tier&&E.stripeSubscriptionId,i=t===e,l=eE(t),n=eE(e),o=a&&n>l,d=a&&n<l;return(console.log("\uD83D\uDD0D Button for ".concat(e,": current=").concat(t,", isCurrentPlan=").concat(i,", hasActive=").concat(a)),i)?(0,r.jsx)("button",{disabled:!0,className:"w-full bg-gray-300 text-gray-600 py-3 rounded-lg font-medium cursor-not-allowed",children:"Current Plan"}):a?o?(0,r.jsx)("button",{onClick:()=>eS(s,e),className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-3 rounded-lg font-medium",disabled:g,children:g?"Processing...":"Upgrade"}):d?(0,r.jsx)("button",{onClick:()=>eI(s,e),className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-3 rounded-lg font-medium",disabled:g,children:g?"Processing...":"Downgrade"}):null:(0,r.jsx)("button",{onClick:()=>eR(e),className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-3 rounded-lg font-medium",disabled:g,children:g?"Processing...":"Choose Plan"})},eR=async e=>{if(null==s?void 0:s.id)try{if(p(!0),"free"!==E.tier&&E.stripeSubscriptionId)return void alert("You already have an active ".concat(E.tier," subscription. Please use the upgrade/downgrade options instead."));let r={starter:c.env.NEXT_PUBLIC_STRIPE_STARTER_PRICE_ID||"",growth:c.env.NEXT_PUBLIC_STRIPE_GROWTH_PLAN_PRICE_ID||"",professional:c.env.NEXT_PUBLIC_STRIPE_PROFESSIONAL_PRICE_ID||"",enterprise:c.env.NEXT_PUBLIC_STRIPE_ENTERPRISE_PRICE_ID||""},a=r[e];if(!a){console.error("Missing price ID for plan:",e,"Available:",r),alert("".concat(e," plan not configured yet. Please contact support or try another plan."));return}let i=await fetch("/api/stripe/create-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:a,planType:e,userId:s.id})}),l=await i.json();if(console.log("Subscription response:",l),!i.ok){if(l.shouldUpgrade)return void alert(l.message);throw Error(l.error||"HTTP ".concat(i.status))}if(l.sessionId){console.log("Redirecting to Stripe checkout:",l.sessionId);try{let{getStripe:e}=await Promise.all([t.e(7887),t.e(8192)]).then(t.bind(t,6205)),s=await e();if(!s)throw Error("Stripe failed to load");let r=await s.redirectToCheckout({sessionId:l.sessionId});r.error&&(console.error("Stripe redirect error:",r.error),alert("Stripe redirect failed: "+r.error.message))}catch(e){console.error("Stripe loading/redirect error:",e),l.url?(console.log("Falling back to direct URL redirect:",l.url),window.location.href=l.url):alert("Could not load Stripe. Please try again or contact support.")}}else l.url?(console.log("Redirecting to URL:",l.url),window.location.href=l.url):(console.error("No session ID or URL in response:",l),alert("Error: No checkout URL received"))}catch(e){console.error("Error purchasing subscription:",e),alert("Error starting checkout. Please try again.")}finally{p(!1)}},eD=async()=>{try{p(!0);let e=await fetch("/api/stripe/create-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jobData:{title:"Single Job Posting"}})}),s=await e.json();if(s.sessionId){let{getStripe:e}=await Promise.all([t.e(7887),t.e(8192)]).then(t.bind(t,6205)),r=await e();await r.redirectToCheckout({sessionId:s.sessionId})}else alert("Error creating checkout session: "+(s.error||"Unknown error"))}catch(e){console.error("Error purchasing single job:",e),alert("Error starting checkout. Please try again.")}finally{p(!1)}},eT=async e=>{try{p(!0);let s={resume_credits_10:c.env.NEXT_PUBLIC_STRIPE_RESUME_CREDITS_10_PRICE_ID||"",resume_credits_25:c.env.NEXT_PUBLIC_STRIPE_RESUME_CREDITS_25_PRICE_ID||"",resume_credits_50:c.env.NEXT_PUBLIC_STRIPE_RESUME_CREDITS_50_PRICE_ID||""}[e]||"",r=await fetch("/api/stripe/purchase-addon",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({addonType:e,priceId:s})}),a=await r.json();if(a.sessionId){let{getStripe:e}=await Promise.all([t.e(7887),t.e(8192)]).then(t.bind(t,6205)),s=await e();await s.redirectToCheckout({sessionId:a.sessionId})}else alert("Error creating checkout session: "+(a.error||"Unknown error"))}catch(e){console.error("Error purchasing addon:",e),alert("Error starting checkout. Please try again.")}finally{p(!1)}},eU=async(e,r)=>{if(null==s?void 0:s.id)try{p(!0);let a={featured:c.env.NEXT_PUBLIC_STRIPE_FEATURED_LISTING_PRICE_ID||"",urgent:c.env.NEXT_PUBLIC_STRIPE_URGENT_BADGE_PRICE_ID||""}[r];if(!a)return void alert("Feature not available. Please contact support.");let i=await fetch("/api/purchase-job-feature",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jobId:e,featureType:r,priceId:a,userId:s.id})}),l=await i.json();if(l.sessionId){let{getStripe:e}=await Promise.all([t.e(7887),t.e(8192)]).then(t.bind(t,6205)),s=await e();await s.redirectToCheckout({sessionId:l.sessionId})}else alert("Error creating checkout session: "+(l.error||"Unknown error"))}catch(e){console.error("Error purchasing job feature:",e),alert("Error starting checkout. Please try again.")}finally{p(!1)}},eA=(e,s)=>{Q(e),ee(s),z(!0)},eJ=async()=>{if(null==s?void 0:s.id)try{let e=await fetch("/api/subscription-status?userId=".concat(s.id)),t=await e.json();t.success&&ec(t.credits||0)}catch(e){console.error("Error loading credits:",e)}},eO=async()=>{try{if(!(null==s?void 0:s.id))return void console.log("No user ID, skipping subscription load");console.log("\uD83D\uDD04 Loading subscription for user:",s.id);let e=await fetch("/api/subscription-status?userId=".concat(s.id)),t=await e.json();if(console.log("\uD83D\uDCCA Subscription API response:",t),t.success&&t.subscription){console.log("✅ Setting subscription state:",t.subscription.plan_type);let e={tier:t.subscription.plan_type||"free",credits:t.subscription.credits||0,activeJobs:t.subscription.active_jobs_limit||0,status:t.subscription.status,currentPeriodEnd:t.subscription.current_period_end,stripeSubscriptionId:t.subscription.stripe_subscription_id||null};S(e),console.log("✅ Subscription state set:",e)}else console.log("ℹ️ No active subscription found, setting free tier"),S({tier:"free",credits:0,activeJobs:0,stripeSubscriptionId:null})}catch(e){console.error("❌ Error loading subscription:",e),S({tier:"free",credits:0,activeJobs:0,stripeSubscriptionId:null})}},eL=async()=>{try{eo(!0);let e=new URLSearchParams;Object.entries(ei).forEach(s=>{let[t,r]=s;r&&e.append(t,r)});let s=await fetch("/api/resume-search?".concat(e)),t=await s.json();t.success?ea(t.profiles):alert("Error searching resumes: "+t.error)}catch(e){console.error("Error searching resumes:",e),alert("Error searching resumes")}finally{eo(!1)}},eF=async e=>{if(null==s?void 0:s.id){if(ed<1)return void alert("Insufficient credits. Please purchase resume credits to view contact details.");if(!ex.has(e))try{let t=await fetch("/api/unlock-profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profileId:e,userId:s.id})}),r=await t.json();r.success?(eu(s=>new Set([...s,e])),ec(e=>e-1),alert("✅ Contact details unlocked! 1 credit used.")):alert("Error unlocking profile: "+r.error)}catch(e){console.error("Error unlocking profile:",e),alert("Error unlocking profile")}}},eB=f.filter(e=>{let s=!eg||e.job_id===eg,t=!eb||e.status===eb;return s&&t});(0,i.useEffect)(()=>{if(null==s?void 0:s.id){ew(),eP();let e=setInterval(eP,6e4);return()=>clearInterval(e)}},[null==s?void 0:s.id]),(0,i.useEffect)(()=>{if("true"===new URLSearchParams(window.location.search).get("free_job")&&I){U(!0);let e=window.location.pathname;window.history.replaceState({},document.title,e)}},[I]),(0,i.useEffect)(()=>{if(console.log("\uD83D\uDD04 Dashboard useEffect - user:",!!s,"loading:",n),n)return void console.log("\uD83D\uDD04 Auth still loading, waiting...");if(!s){console.log("❌ No user found, redirecting to login"),x.push("/auth/login");return}console.log("✅ User found, loading dashboard data"),eM()},[s,n,x]),(0,i.useEffect)(()=>{let e=async()=>{if(!(null==s?void 0:s.id))return void console.log("No user ID for subscription check");try{console.log("\uD83D\uDD04 Checking subscription status...");let e=await fetch("/api/check-subscription-status?userId=".concat(s.id)),t=await e.json();console.log("\uD83D\uDCCA Subscription check response:",t),M({loading:!1,hasActiveSubscription:t.hasActiveSubscription,currentPlan:t.currentPlan||"free",canPurchaseNew:t.canPurchaseNew}),t.subscription&&(console.log("✅ Updating subscription from check:",t.subscription.plan_type),S({tier:t.subscription.plan_type||"free",credits:t.subscription.credits||0,activeJobs:t.subscription.active_jobs_limit||0,status:t.subscription.status,currentPeriodEnd:t.subscription.current_period_end,stripeSubscriptionId:t.subscription.stripe_subscription_id||null}))}catch(e){console.error("❌ Error checking subscription:",e),M(e=>({...e,loading:!1}))}};(null==s?void 0:s.id)&&e()},[null==s?void 0:s.id]),(0,i.useEffect)(()=>{let e=u.get("tab");e&&["overview","jobs","applications","resume-search","analytics","billing"].includes(e)&&h(e)},[u]);let e$=async()=>{if(null==s?void 0:s.id)try{let e=await fetch("/api/subscription-status?userId=".concat(s.id)),t=await e.json();t.success&&t.subscription&&S({tier:t.subscription.plan_type||"free",credits:t.credits||0,activeJobs:t.subscription.active_jobs_limit||0,status:t.subscription.status,currentPeriodEnd:t.subscription.current_period_end,stripeSubscriptionId:t.subscription.stripe_subscription_id||null})}catch(e){console.error("Error updating subscription:",e)}};(0,i.useEffect)(()=>{if(!b||!s)return;let e=setInterval(()=>{eG()},3e4);return()=>clearInterval(e)},[s,b]);let eM=async()=>{try{console.log("\uD83D\uDD04 Loading employer data..."),p(!0);let e=[eX().catch(e=>console.error("Error loading jobs:",e)),eG().catch(e=>console.error("Error loading applications:",e)),eq().catch(e=>console.error("Error loading analytics:",e)),eY().catch(e=>console.error("Error loading profile:",e)),eJ().catch(e=>console.error("Error loading credits:",e)),eO().catch(e=>console.error("Error loading subscription:",e))];await Promise.allSettled(e),console.log("✅ Employer data loading completed")}catch(e){console.error("❌ Critical error loading employer data:",e)}finally{console.log("\uD83D\uDD04 Setting isLoading to false"),p(!1)}},eX=async()=>{if(s)try{console.log("\uD83D\uDCCA Loading jobs for employer:",s.id);let e=await fetch("/api/jobs?userId=".concat(s.id)),t=await e.json();t.jobs?(v(t.jobs),console.log("✅ Loaded ".concat(t.jobs.length," jobs"))):console.error("❌ Failed to load jobs:",t.error)}catch(e){console.error("❌ Error loading jobs:",e)}},eG=async()=>{if(s)try{console.log("\uD83D\uDCCA Loading applications for employer:",s.id);let e=await fetch("/api/applications?employerId=".concat(s.id)),t=await e.json();t.success?(N(t.applications),console.log("✅ Loaded ".concat(t.applications.length," applications"))):console.error("❌ Failed to load applications:",t.error)}catch(e){console.error("❌ Error loading applications:",e)}},eq=async()=>{if(s)try{let e=await fetch("/api/job-analytics?userId=".concat(s.id)),t=await e.json();t.success?(console.log("\uD83D\uDD0D Raw analytics data:",t.analytics),P(t.analytics),console.log("✅ Loaded analytics data")):console.log("❌ Analytics API returned:",t)}catch(e){console.error("Error loading analytics:",e)}},eY=async()=>{if(s)try{let e=await fetch("/api/profile?userId=".concat(s.id));if(e.ok){let t=await e.json();t.profile?C({companyName:t.profile.company_name||"",contactEmail:t.profile.email||s.email,contactPhone:t.profile.phone||"",location:t.profile.location||"",website:t.profile.website||"",description:t.profile.description||""}):C({companyName:"",contactEmail:s.email,contactPhone:"",location:"",website:"",description:""})}}catch(e){console.error("Error loading profile:",e)}},eH=async e=>{if(e.preventDefault(),null==s?void 0:s.id)try{let e=es?"PUT":"POST",t=es?"/api/jobs/".concat(es.id):"/api/jobs",r=await fetch(t,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify({...em,userId:s.id,id:null==es?void 0:es.id})});if(r.ok)await eX(),G(!1),et(null),eh({title:"",company:"",description:"",requirements:"",region:"",hourlyRate:"",duration:"",startDate:"",industry:"",classification:"",benefits:"",contactEmail:"",contactPhone:""}),alert(es?"Job updated successfully!":"Job posted successfully!");else{let e=await r.json();alert("Error: "+e.error)}}catch(e){console.error("Error submitting job:",e),alert("Error submitting job")}},ez=async(e,t)=>{if(null==s?void 0:s.id)try{let r=await fetch("/api/applications",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({applicationId:e,status:t,userId:s.id})});if(r.ok)await eG(),alert("Application status updated successfully!");else{let e=await r.json();alert("Error: "+e.error)}}catch(e){console.error("Error updating application:",e),alert("Error updating application status")}},eV=e=>{et(e),eh({title:e.title||"",company:e.company||"",description:e.description||"",requirements:e.requirements||"",region:e.region||"",hourlyRate:e.hourly_rate||"",duration:e.duration||"",startDate:e.start_date||"",industry:e.industry||"",classification:e.classification||"",benefits:e.benefits||"",contactEmail:e.contact_email||"",contactPhone:e.contact_phone||""}),G(!0)},eW=async e=>{if(confirm("Are you sure you want to delete this job?"))try{let s=await fetch("/api/jobs/".concat(e),{method:"DELETE"});if(s.ok)await eX(),alert("Job deleted successfully!");else{let e=await s.json();alert("Error: "+e.error)}}catch(e){console.error("Error deleting job:",e),alert("Error deleting job")}},eK=e=>{W(e),Y(!0)},eQ=e=>e?new Date(e).toLocaleDateString():"Never",eZ=e=>!!e&&new Date(e)<new Date,e0=n&&!s||s&&g;return(console.log("\uD83D\uDD04 Loading check - auth loading:",n,"user exists:",!!s,"dashboard loading:",g,"should show loading:",e0),e0)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-4",children:"⏳"}),(0,r.jsx)("div",{children:"Loading your dashboard..."}),(0,r.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:n&&!s?"Authenticating...":"Loading dashboard data..."}),(0,r.jsxs)("div",{className:"text-xs text-gray-400 mt-2",children:["Auth: ",n?"loading":"done"," | User: ",s?"found":"none"," | Dashboard: ",g?"loading":"done"]})]})}):(console.log("✅ Rendering dashboard - subscription tier:",E.tier),(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-4",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 mb-6 shadow",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Employer Dashboard"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Welcome back! Manage your job postings and applications."}),(0,r.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:["Current Plan: ",E.tier," | Credits: ",E.credits," | Jobs Limit: ",E.activeJobs]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[I&&!R?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>U(!0),className:"bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white px-6 py-2 rounded-lg font-medium flex items-center gap-2 shadow-lg",children:"\uD83C\uDF81 First Job Free"}),(0,r.jsx)("button",{onClick:()=>G(!0),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-medium",children:"Post Job"})]}):(0,r.jsx)("button",{onClick:()=>G(!0),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-medium",children:"Post New Job"}),(0,r.jsx)(o(),{href:"/",className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium",children:"View Site"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-500",children:y.length}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Active Jobs"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-indigo-500",children:"enterprise"===E.tier?"Unlimited":"".concat(Math.max(0,(E.activeJobs||0)-y.length))}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"enterprise"===E.tier?"Job Postings":"Jobs Left"}),"enterprise"!==E.tier&&0===E.activeJobs&&(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Upgrade for more"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-500",children:f.length}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Total Applications"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-500",children:f.filter(e=>"new"===e.status).length}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"New Applications"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-500",children:ed}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Resume Credits"})]})]})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg p-4 mb-6 shadow",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:[{id:"overview",label:"Overview",icon:"\uD83D\uDCCA"},{id:"jobs",label:"Job Postings",icon:"\uD83D\uDCBC"},{id:"applications",label:"Applications",icon:"\uD83D\uDCE7",badge:f.filter(e=>"new"===e.status).length},{id:"resume-search",label:"Resume Search",icon:"\uD83D\uDD0D"},{id:"analytics",label:"Analytics",icon:"\uD83D\uDCC8"},{id:"billing",label:"Billing & Plans",icon:"\uD83D\uDCB3"}].map(e=>(0,r.jsxs)("button",{onClick:()=>h(e.id),className:"px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ".concat(m===e.id?"bg-orange-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[e.icon," ",e.label,e.badge&&e.badge>0&&(0,r.jsx)("span",{className:"ml-2 bg-red-500 text-white text-xs rounded-full px-2 py-1",children:e.badge})]},e.id))})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow",children:["overview"===m&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-6",children:"Dashboard Overview"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Recent Job Postings"}),y.slice(0,3).map(e=>(0,r.jsx)("div",{className:"border border-gray-200 p-4 mb-2 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-semibold",children:e.title}),(0,r.jsxs)("div",{className:"text-gray-600 text-sm",children:[e.company," • ",e.region]}),(0,r.jsxs)("div",{className:"text-gray-500 text-xs",children:["Posted: ",new Date(e.created_at).toLocaleDateString()]})]}),(0,r.jsxs)("div",{className:"flex gap-1",children:[e.is_free_job&&(0,r.jsx)("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:"\uD83C\uDF81 FREE"}),e.isFeatured&&!eZ(e.featuredUntil)&&(0,r.jsx)("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:"⭐ Featured"}),e.isUrgent&&!eZ(e.urgentUntil)&&(0,r.jsx)("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full",children:"\uD83D\uDEA8 Urgent"})]})]})},e.id)),0===y.length&&(0,r.jsxs)("p",{className:"text-gray-500 italic",children:["No jobs posted yet. ",(0,r.jsx)("button",{onClick:()=>G(!0),className:"text-orange-500",children:"Post your first job"}),"!"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Recent Applications"}),f.slice(0,3).map(e=>{var s;return(0,r.jsx)("div",{className:"border border-gray-200 p-4 mb-2 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"font-semibold",children:[e.first_name," ",e.last_name]}),(0,r.jsx)("div",{className:"text-gray-600 text-sm",children:null==(s=e.jobs)?void 0:s.title}),(0,r.jsxs)("div",{className:"text-gray-500 text-xs",children:["Applied: ",new Date(e.created_at).toLocaleDateString()]})]}),(0,r.jsx)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("new"===e.status?"bg-blue-100 text-blue-800":"shortlisted"===e.status?"bg-green-100 text-green-800":"interviewed"===e.status?"bg-purple-100 text-purple-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status||"new"})]})},e.id)}),0===f.length&&(0,r.jsx)("p",{className:"text-gray-500 italic",children:"No applications yet. Applications will appear here when candidates apply to your jobs."})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[I&&!R&&(0,r.jsx)("button",{onClick:()=>U(!0),className:"bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white px-4 py-2 rounded-lg",children:"\uD83C\uDF81 Post Free Job"}),(0,r.jsx)("button",{onClick:()=>G(!0),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg",children:"Post New Job"}),(0,r.jsx)("button",{onClick:()=>h("applications"),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg",children:"Review Applications"}),(0,r.jsx)("button",{onClick:()=>h("analytics"),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg",children:"View Analytics"})]})]})]}),"jobs"===m&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold",children:["Job Postings (",y.length,")"]}),(0,r.jsx)("button",{onClick:()=>G(!0),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg",children:"Post New Job"})]}),0===y.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCBC"}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No jobs posted yet"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Start by posting your first job to attract candidates"}),(0,r.jsx)("button",{onClick:()=>G(!0),className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg",children:"Post Your First Job"})]}):(0,r.jsx)("div",{className:"space-y-4",children:y.map(e=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:e.title}),(0,r.jsxs)("div",{className:"flex gap-1",children:[e.is_free_job&&(0,r.jsx)("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:"\uD83C\uDF81 FREE"}),e.isFeatured&&!eZ(e.featuredUntil)&&(0,r.jsx)("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:"⭐ Featured"}),e.isUrgent&&!eZ(e.urgentUntil)&&(0,r.jsx)("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full",children:"\uD83D\uDEA8 Urgent"})]})]}),(0,r.jsxs)("p",{className:"text-gray-600 mb-1",children:[e.company," • ",e.region]}),(0,r.jsxs)("p",{className:"text-gray-500 text-sm",children:["Posted: ",eQ(e.created_at)]}),(0,r.jsx)("p",{className:"text-gray-700 mt-2 line-clamp-2",children:e.description})]}),(0,r.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,r.jsx)("button",{onClick:()=>eV(e),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>eW(e.id),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm",children:"Delete"})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>eA(e,"featured"),className:"text-yellow-600 hover:text-yellow-700 text-sm flex items-center gap-1",children:"⭐ Feature Job"}),(0,r.jsx)("button",{onClick:()=>eA(e,"urgent"),className:"text-red-600 hover:text-red-700 text-sm flex items-center gap-1",children:"\uD83D\uDEA8 Mark Urgent"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[f.filter(s=>s.job_id===e.id).length," applications"]})]})]},e.id))})]}),"applications"===m&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold",children:["Applications (",f.length,")"]}),(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsxs)("button",{onClick:()=>j(!b),className:"px-3 py-1 rounded text-sm ".concat(b?"bg-green-500 text-white":"bg-gray-200 text-gray-700"),children:["Auto-refresh ",b?"ON":"OFF"]})})]}),(0,r.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Filter by Job"}),(0,r.jsxs)("select",{value:eg,onChange:e=>ep(e.target.value),className:"w-full p-2 border border-gray-300 rounded",children:[(0,r.jsx)("option",{value:"",children:"All Jobs"}),y.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.title," - ",e.company]},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Filter by Status"}),(0,r.jsxs)("select",{value:eb,onChange:e=>ej(e.target.value),className:"w-full p-2 border border-gray-300 rounded",children:[(0,r.jsx)("option",{value:"",children:"All Statuses"}),(0,r.jsx)("option",{value:"new",children:"New"}),(0,r.jsx)("option",{value:"shortlisted",children:"Shortlisted"}),(0,r.jsx)("option",{value:"interviewed",children:"Interviewed"}),(0,r.jsx)("option",{value:"rejected",children:"Rejected"})]})]})]})}),0===eB.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCE7"}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No applications yet"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Applications will appear here when candidates apply to your jobs"})]}):(0,r.jsx)("div",{className:"space-y-4",children:eB.map(e=>{var s;return(0,r.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold",children:[e.first_name," ",e.last_name]}),(0,r.jsx)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("new"===e.status?"bg-blue-100 text-blue-800":"shortlisted"===e.status?"bg-green-100 text-green-800":"interviewed"===e.status?"bg-purple-100 text-purple-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status||"new"})]}),(0,r.jsxs)("p",{className:"text-gray-600 mb-1",children:["Applied for: ",null==(s=e.jobs)?void 0:s.title]}),(0,r.jsxs)("p",{className:"text-gray-500 text-sm",children:["Email: ",e.email," • Phone: ",e.phone]}),(0,r.jsxs)("p",{className:"text-gray-500 text-sm",children:["Applied: ",eQ(e.applied_at)]})]}),(0,r.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,r.jsx)("button",{onClick:()=>eK(e),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm",children:"View Details"}),(0,r.jsxs)("select",{value:e.status||"new",onChange:s=>ez(e.id,s.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[(0,r.jsx)("option",{value:"new",children:"New"}),(0,r.jsx)("option",{value:"shortlisted",children:"Shortlisted"}),(0,r.jsx)("option",{value:"interviewed",children:"Interviewed"}),(0,r.jsx)("option",{value:"rejected",children:"Rejected"})]})]})]})},e.id)})})]}),"resume-search"===m&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Resume Search"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Credits: ",ed," • Each contact unlock uses 1 credit"]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Search Filters"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Keywords"}),(0,r.jsx)("input",{type:"text",value:ei.keywords,onChange:e=>el(s=>({...s,keywords:e.target.value})),placeholder:"Skills, job titles, etc.",className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Location"}),(0,r.jsx)("input",{type:"text",value:ei.location,onChange:e=>el(s=>({...s,location:e.target.value})),placeholder:"City, state, remote",className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Classification"}),(0,r.jsxs)("select",{value:ei.classification,onChange:e=>el(s=>({...s,classification:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",children:[(0,r.jsx)("option",{value:"",children:"Any Classification"}),(0,r.jsx)("option",{value:"Staff",children:"Staff"}),(0,r.jsx)("option",{value:"Contract",children:"Contract"}),(0,r.jsx)("option",{value:"Freelance",children:"Freelance"})]})]})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("button",{onClick:eL,disabled:en,className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg disabled:opacity-50",children:en?"Searching...":"Search Resumes"}),(0,r.jsx)("button",{onClick:()=>el({keywords:"",location:"",classification:"",specialization:"",minExperience:"",maxExperience:"",industries:"",clearance:"",availableBy:"",minRate:"",maxRate:""}),className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg",children:"Clear Filters"})]})]}),(0,r.jsx)("div",{children:0===er.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDD0D"}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No search results"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Use the filters above to search for candidates"})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold mb-3",children:["Search Results (",er.length,")"]}),er.map(e=>{var s,t;return(0,r.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-1",children:ex.has(e.id)?"".concat(e.first_name," ").concat(e.last_name):"".concat(e.first_name," ").concat(null==(s=e.last_name)?void 0:s[0],"***")}),(0,r.jsx)("p",{className:"text-gray-600 mb-2",children:e.title||"Professional"}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:e.summary}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:null==(t=e.skills)?void 0:t.split(",").slice(0,5).map((e,s)=>(0,r.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs",children:e.trim()},s))}),ex.has(e.id)&&(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,r.jsxs)("p",{children:["Email: ",e.email]}),(0,r.jsxs)("p",{children:["Phone: ",e.phone]})]})]}),(0,r.jsx)("div",{className:"ml-4",children:ex.has(e.id)?(0,r.jsx)("div",{className:"text-green-600 font-medium",children:"Contact Unlocked"}):(0,r.jsx)("button",{onClick:()=>eF(e.id),disabled:ed<1,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Unlock Contact (1 credit)"})})]})},e.id)})]})})]}),"analytics"===m&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-6",children:"Analytics & Insights"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-4 gap-4 mb-8",children:[(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:w.totalViews||0}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Total Job Views"})]}),(0,r.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:w.totalApplications||0}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Total Applications"})]}),(0,r.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[w.totalApplications>0?Math.round(w.totalApplications/Math.max(w.totalViews,1)*100):0,"%"]}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Application Rate"})]}),(0,r.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:w.activeJobs||0}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Active Jobs"})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Job Performance"}),0===y.length?(0,r.jsx)("p",{className:"text-gray-500 italic",children:"No job data available"}):(0,r.jsx)("div",{className:"space-y-3",children:y.map(e=>{let s=f.filter(s=>s.job_id===e.id);return(0,r.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold",children:e.title}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:e.company})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-lg font-semibold",children:s.length}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Applications"})]})]})},e.id)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Recent Activity"}),(0,r.jsxs)("div",{className:"space-y-2",children:[f.slice(0,5).map(e=>{var s;return(0,r.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:"font-medium",children:[e.first_name," ",e.last_name]}),(0,r.jsx)("span",{className:"text-gray-600",children:" applied to "}),(0,r.jsx)("span",{className:"font-medium",children:null==(s=e.jobs)?void 0:s.title})]}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:eQ(e.applied_at)})]},e.id)}),0===f.length&&(0,r.jsx)("p",{className:"text-gray-500 italic",children:"No recent activity"})]})]})]}),"billing"===m&&(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)(d,{user:s,subscription:{plan_type:E.tier,credits:E.credits,active_jobs_limit:E.activeJobs,status:E.status,current_period_end:E.currentPeriodEnd,stripe_subscription_id:E.stripeSubscriptionId,price:E.price||0},onSubscriptionUpdate:e$}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-6",children:"Subscription Plans"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-4 gap-6 mb-8",children:[(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Starter"}),(0,r.jsx)("div",{className:"text-3xl font-bold text-orange-500 my-2",children:"$199"}),(0,r.jsx)("div",{className:"text-gray-600 text-sm",children:"per month"})]}),(0,r.jsxs)("ul",{className:"space-y-2 mb-6 text-sm",children:[(0,r.jsx)("li",{children:"✅ 3 active job postings"}),(0,r.jsx)("li",{children:"✅ Basic applicant management"}),(0,r.jsx)("li",{children:"✅ Email support"})]}),ek("starter",c.env.NEXT_PUBLIC_STRIPE_STARTER_PRICE_ID||"")]}),(0,r.jsxs)("div",{className:"border border-orange-300 rounded-lg p-6 relative bg-orange-50",children:[(0,r.jsx)("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:(0,r.jsx)("span",{className:"bg-orange-500 text-white px-3 py-1 rounded-full text-xs font-medium",children:"MOST POPULAR"})}),(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Growth"}),(0,r.jsx)("div",{className:"text-3xl font-bold text-orange-500 my-2",children:"$299"}),(0,r.jsx)("div",{className:"text-gray-600 text-sm",children:"per month"})]}),(0,r.jsxs)("ul",{className:"space-y-2 mb-6 text-sm",children:[(0,r.jsx)("li",{children:"✅ 6 active job postings"}),(0,r.jsx)("li",{children:"✅ Resume credits included"}),(0,r.jsx)("li",{children:"✅ Priority support"})]}),ek("growth",c.env.NEXT_PUBLIC_STRIPE_GROWTH_PLAN_PRICE_ID||"")]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Professional"}),(0,r.jsx)("div",{className:"text-3xl font-bold text-orange-500 my-2",children:"$599"}),(0,r.jsx)("div",{className:"text-gray-600 text-sm",children:"per month"})]}),(0,r.jsxs)("ul",{className:"space-y-2 mb-6 text-sm",children:[(0,r.jsx)("li",{children:"✅ 15 active job postings"}),(0,r.jsx)("li",{children:"✅ 25 resume credits included"}),(0,r.jsx)("li",{children:"✅ Advanced analytics"}),(0,r.jsx)("li",{children:"✅ Featured listings"})]}),ek("professional",c.env.NEXT_PUBLIC_STRIPE_PROFESSIONAL_PRICE_ID||"")]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Enterprise"}),(0,r.jsx)("div",{className:"text-3xl font-bold text-purple-600 my-2",children:"$1,999"}),(0,r.jsx)("div",{className:"text-gray-600 text-sm",children:"per month"})]}),(0,r.jsxs)("ul",{className:"space-y-2 mb-6 text-sm",children:[(0,r.jsx)("li",{children:"✅ Unlimited job postings"}),(0,r.jsx)("li",{children:"✅ Unlimited resume access"}),(0,r.jsx)("li",{children:"✅ Dedicated account manager"})]}),ek("enterprise",c.env.NEXT_PUBLIC_STRIPE_ENTERPRISE_PRICE_ID||"")]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-6",children:"Single Job Postings & Add-Ons"}),(0,r.jsx)("div",{className:"grid md:grid-cols-1 gap-6 mb-8",children:(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Single Job"}),(0,r.jsx)("div",{className:"text-3xl font-bold text-orange-500 my-2",children:"$99"}),(0,r.jsx)("div",{className:"text-gray-600 text-sm",children:"one-time"})]}),(0,r.jsxs)("ul",{className:"space-y-2 mb-6 text-sm",children:[(0,r.jsx)("li",{children:"✅ 1 job posting (30 days)"}),(0,r.jsx)("li",{children:"✅ Basic applicant management"}),(0,r.jsx)("li",{children:"✅ Email support"})]}),(0,r.jsx)("button",{onClick:()=>eD(),className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-3 rounded-lg font-medium",disabled:g,children:g?"Processing...":"Post Job - $99"})]})}),(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-8",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Premium Add-Ons"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Resume Credits - 10 Pack"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-500 mb-2",children:"$39"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"10 credits for candidate contact"}),(0,r.jsx)("button",{onClick:()=>eT("resume_credits_10"),className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded",disabled:g,children:g?"Processing...":"Buy 10 Credits"})]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Resume Credits - 25 Pack"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-500 mb-2",children:"$79"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"25 credits - Best Value"}),(0,r.jsx)("button",{onClick:()=>eT("resume_credits_25"),className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded",disabled:g,children:g?"Processing...":"Buy 25 Credits"})]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Resume Credits - 50 Pack"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-500 mb-2",children:"$129"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"50 credits for high volume"}),(0,r.jsx)("button",{onClick:()=>eT("resume_credits_50"),className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded",disabled:g,children:g?"Processing...":"Buy 50 Credits"})]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Featured Listing"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-500 mb-2",children:"$29"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Top of search results with bright highlight badge"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Apply to individual jobs in the Job Postings tab"}),(0,r.jsx)("button",{onClick:()=>h("jobs"),className:"w-full bg-yellow-500 hover:bg-yellow-600 text-white py-2 rounded",children:"⭐ Manage Featured Jobs"})]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Urgent Badge"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-500 mb-2",children:"$19"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:'Bright "URGENT" badge for immediate attention'}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Apply to individual jobs in the Job Postings tab"}),(0,r.jsx)("button",{onClick:()=>h("jobs"),className:"w-full bg-red-500 hover:bg-red-600 text-white py-2 rounded",children:"\uD83D\uDEA8 Manage Urgent Jobs"})]})]})]})]})]}),"billing-old"===m&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-6",children:"Billing & Plans"}),(0,r.jsx)("div",{className:"bg-blue-50 p-6 rounded-lg mb-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold capitalize",children:["Current Plan: ",E.tier]}),(0,r.jsx)("p",{className:"text-gray-600",children:"free"===E.tier?"You are on the free plan with limited features":"Your ".concat(E.tier," plan is active")}),E.currentPeriodEnd&&(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Renews on: ",eQ(E.currentPeriodEnd)]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:E.credits||0}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Resume Credits"})]})]})}),(0,r.jsxs)("div",{className:"grid md:grid-cols-4 gap-6 mb-8",children:[(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Single Job"}),(0,r.jsx)("div",{className:"text-3xl font-bold text-orange-500 my-2",children:"$99"}),(0,r.jsx)("div",{className:"text-gray-600 text-sm",children:"one-time"})]}),(0,r.jsxs)("ul",{className:"space-y-2 mb-6 text-sm",children:[(0,r.jsx)("li",{children:"✅ 1 job posting (30 days)"}),(0,r.jsx)("li",{children:"✅ Basic applicant management"}),(0,r.jsx)("li",{children:"✅ Email support"})]}),(0,r.jsx)("button",{onClick:()=>eD(),className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-3 rounded-lg font-medium",disabled:g,children:g?"Processing...":"Post Job - $99"})]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Starter"}),(0,r.jsx)("div",{className:"text-3xl font-bold text-orange-500 my-2",children:"$199"}),(0,r.jsx)("div",{className:"text-gray-600 text-sm",children:"per month"})]}),(0,r.jsxs)("ul",{className:"space-y-2 mb-6 text-sm",children:[(0,r.jsx)("li",{children:"✅ 3 active job postings"}),(0,r.jsx)("li",{children:"✅ Basic applicant management"}),(0,r.jsx)("li",{children:"✅ Email support"})]}),ek("starter",c.env.NEXT_PUBLIC_STRIPE_STARTER_PRICE_ID||"")]}),(0,r.jsxs)("div",{className:"border border-orange-300 rounded-lg p-6 relative bg-orange-50",children:[(0,r.jsx)("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:(0,r.jsx)("span",{className:"bg-orange-500 text-white px-3 py-1 rounded-full text-xs font-medium",children:"MOST POPULAR"})}),(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Growth"}),(0,r.jsx)("div",{className:"text-3xl font-bold text-orange-500 my-2",children:"$299"}),(0,r.jsx)("div",{className:"text-gray-600 text-sm",children:"per month"})]}),(0,r.jsxs)("ul",{className:"space-y-2 mb-6 text-sm",children:[(0,r.jsx)("li",{children:"✅ 6 active job postings"}),(0,r.jsx)("li",{children:"✅ Resume credits included"}),(0,r.jsx)("li",{children:"✅ Priority support"})]}),ek("growth",c.env.NEXT_PUBLIC_STRIPE_GROWTH_PLAN_PRICE_ID||"")]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Professional"}),(0,r.jsx)("div",{className:"text-3xl font-bold text-orange-500 my-2",children:"$599"}),(0,r.jsx)("div",{className:"text-gray-600 text-sm",children:"per month"})]}),(0,r.jsxs)("ul",{className:"space-y-2 mb-6 text-sm",children:[(0,r.jsx)("li",{children:"✅ 15 active job postings"}),(0,r.jsx)("li",{children:"✅ 25 resume credits included"}),(0,r.jsx)("li",{children:"✅ Advanced analytics"}),(0,r.jsx)("li",{children:"✅ Featured listings"})]}),ek("professional",c.env.NEXT_PUBLIC_STRIPE_PROFESSIONAL_PRICE_ID||"")]})]}),(0,r.jsxs)("div",{className:"border border-purple-300 rounded-lg p-6 mb-8",children:[(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsx)("h3",{className:"text-2xl font-semibold",children:"Enterprise"}),(0,r.jsx)("div",{className:"text-4xl font-bold text-purple-600 my-2",children:"$1,999"}),(0,r.jsx)("div",{className:"text-gray-600",children:"per month"})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 mb-6 text-sm",children:[(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("div",{children:"✅ Unlimited job postings"})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("div",{children:"✅ Unlimited resume access"})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("div",{children:"✅ Dedicated account manager"})})]}),ek("enterprise",c.env.NEXT_PUBLIC_STRIPE_ENTERPRISE_PRICE_ID||"")]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-8",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Premium Add-Ons"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Resume Credits - 10 Pack"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-500 mb-2",children:"$39"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"10 credits for candidate contact"}),(0,r.jsx)("button",{onClick:()=>eT("resume_credits_10"),className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded",disabled:g,children:g?"Processing...":"Buy 10 Credits"})]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Resume Credits - 25 Pack"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-500 mb-2",children:"$79"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"25 credits - Best Value"}),(0,r.jsx)("button",{onClick:()=>eT("resume_credits_25"),className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded",disabled:g,children:g?"Processing...":"Buy 25 Credits"})]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Resume Credits - 50 Pack"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-500 mb-2",children:"$129"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"50 credits for high volume"}),(0,r.jsx)("button",{onClick:()=>eT("resume_credits_50"),className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded",disabled:g,children:g?"Processing...":"Buy 50 Credits"})]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Featured Listing"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-500 mb-2",children:"$29"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Top of search results with bright highlight badge"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Apply to individual jobs in the Job Postings tab"}),(0,r.jsx)("button",{onClick:()=>h("jobs"),className:"w-full bg-yellow-500 hover:bg-yellow-600 text-white py-2 rounded",children:"⭐ Manage Featured Jobs"})]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Urgent Badge"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-500 mb-2",children:"$19"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:'Bright "URGENT" badge for immediate attention'}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Apply to individual jobs in the Job Postings tab"}),(0,r.jsx)("button",{onClick:()=>h("jobs"),className:"w-full bg-red-500 hover:bg-red-600 text-white py-2 rounded",children:"\uD83D\uDEA8 Manage Urgent Jobs"})]})]})]})]})]}),X&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-screen overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:es?"Edit Job":"Post New Job"}),(0,r.jsx)("button",{onClick:()=>{G(!1),et(null),eh({title:"",company:"",description:"",requirements:"",region:"",hourlyRate:"",duration:"",startDate:"",industry:"",classification:"",benefits:"",contactEmail:"",contactPhone:""})},className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),(0,r.jsxs)("form",{onSubmit:eH,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Job Title *"}),(0,r.jsx)("input",{type:"text",value:em.title,onChange:e=>eh(s=>({...s,title:e.target.value})),required:!0,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Company *"}),(0,r.jsx)("input",{type:"text",value:em.company,onChange:e=>eh(s=>({...s,company:e.target.value})),required:!0,className:"w-full p-2 border border-gray-300 rounded"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description *"}),(0,r.jsx)("textarea",{value:em.description,onChange:e=>eh(s=>({...s,description:e.target.value})),required:!0,rows:4,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Requirements"}),(0,r.jsx)("textarea",{value:em.requirements,onChange:e=>eh(s=>({...s,requirements:e.target.value})),rows:3,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Region *"}),(0,r.jsx)("input",{type:"text",value:em.region,onChange:e=>eh(s=>({...s,region:e.target.value})),required:!0,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Hourly Rate"}),(0,r.jsx)("input",{type:"text",value:em.hourlyRate,onChange:e=>eh(s=>({...s,hourlyRate:e.target.value})),placeholder:"$50-75/hr",className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Duration"}),(0,r.jsx)("input",{type:"text",value:em.duration,onChange:e=>eh(s=>({...s,duration:e.target.value})),placeholder:"6 months",className:"w-full p-2 border border-gray-300 rounded"})]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Start Date"}),(0,r.jsx)("input",{type:"date",value:em.startDate,onChange:e=>eh(s=>({...s,startDate:e.target.value})),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Industry"}),(0,r.jsxs)("select",{value:em.industry,onChange:e=>eh(s=>({...s,industry:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",children:[(0,r.jsx)("option",{value:"",children:"Select Industry"}),(0,r.jsx)("option",{value:"Technology",children:"Technology"}),(0,r.jsx)("option",{value:"Healthcare",children:"Healthcare"}),(0,r.jsx)("option",{value:"Finance",children:"Finance"}),(0,r.jsx)("option",{value:"Education",children:"Education"}),(0,r.jsx)("option",{value:"Manufacturing",children:"Manufacturing"}),(0,r.jsx)("option",{value:"Other",children:"Other"})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{G(!1),et(null),eh({title:"",company:"",description:"",requirements:"",region:"",hourlyRate:"",duration:"",startDate:"",industry:"",classification:"",benefits:"",contactEmail:"",contactPhone:""})},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600",children:es?"Update Job":"Post Job"})]})]})]})}),T&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-screen overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-green-600",children:"Post Your First Job Free! \uD83C\uDF81"}),(0,r.jsx)("button",{onClick:()=>U(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),(0,r.jsx)("div",{className:"bg-green-50 p-4 rounded-lg mb-4",children:(0,r.jsx)("p",{className:"text-green-800",children:"\uD83C\uDF89 Congratulations! You're eligible for one free job posting. This is a limited-time offer for new employers."})}),(0,r.jsxs)("form",{onSubmit:e_,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Job Title *"}),(0,r.jsx)("input",{type:"text",value:em.title,onChange:e=>eh(s=>({...s,title:e.target.value})),required:!0,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Company *"}),(0,r.jsx)("input",{type:"text",value:em.company,onChange:e=>eh(s=>({...s,company:e.target.value})),required:!0,className:"w-full p-2 border border-gray-300 rounded"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description *"}),(0,r.jsx)("textarea",{value:em.description,onChange:e=>eh(s=>({...s,description:e.target.value})),required:!0,rows:4,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Region *"}),(0,r.jsx)("input",{type:"text",value:em.region,onChange:e=>eh(s=>({...s,region:e.target.value})),required:!0,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Hourly Rate"}),(0,r.jsx)("input",{type:"text",value:em.hourlyRate,onChange:e=>eh(s=>({...s,hourlyRate:e.target.value})),placeholder:"$50-75/hr",className:"w-full p-2 border border-gray-300 rounded"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>U(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:g,className:"px-6 py-2 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded hover:from-green-600 hover:to-blue-600 disabled:opacity-50",children:g?"Posting...":"Post Free Job \uD83C\uDF81"})]})]})]})}),q&&V&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Application Details"}),(0,r.jsx)("button",{onClick:()=>Y(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Name:"})," ",V.first_name," ",V.last_name]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Email:"})," ",V.email]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Phone:"})," ",V.phone]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Applied for:"})," ",null==(e=V.jobs)?void 0:e.title]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Classification:"})," ",V.classification||"Not specified"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Applied on:"})," ",eQ(V.applied_at)]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Status:"}),(0,r.jsxs)("select",{value:V.status||"new",onChange:e=>{ez(V.id,e.target.value),W(s=>({...s,status:e.target.value}))},className:"ml-2 px-2 py-1 border border-gray-300 rounded",children:[(0,r.jsx)("option",{value:"new",children:"New"}),(0,r.jsx)("option",{value:"shortlisted",children:"Shortlisted"}),(0,r.jsx)("option",{value:"interviewed",children:"Interviewed"}),(0,r.jsx)("option",{value:"rejected",children:"Rejected"})]})]})]}),(0,r.jsx)("div",{className:"flex justify-end mt-6",children:(0,r.jsx)("button",{onClick:()=>Y(!1),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Close"})})]})}),H&&K&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"featured"===Z?"Feature Job":"Mark as Urgent"}),(0,r.jsx)("button",{onClick:()=>z(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h3",{className:"font-semibold mb-2",children:K.title}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:K.company})]}),(0,r.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg mb-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"featured"===Z?"⭐ Featured Job Listing":"\uD83D\uDEA8 Urgent Job Badge"}),(0,r.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:"featured"===Z?"Your job will appear at the top of search results and get highlighted styling for 30 days.":'Your job will display an "URGENT" badge to attract immediate attention for 14 days.'}),(0,r.jsx)("div",{className:"text-lg font-bold",children:"featured"===Z?"$29":"$19"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)("button",{onClick:()=>z(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),(0,r.jsxs)("button",{onClick:()=>{eU(K.id,Z),z(!1)},className:"px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600",children:["Purchase ","featured"===Z?"$29":"$19"]})]})]})}),O&&F&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"\uD83C\uDF89"}),(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Great News!"})]}),(0,r.jsx)("div",{className:"mb-4",children:"first_application"===F.prompt_type&&(0,r.jsx)("p",{className:"text-gray-700",children:"Congratulations! You just received your first application on your free job posting. Upgrade to a paid plan to unlock more job postings and advanced features."})}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)("button",{onClick:()=>eC("dismiss"),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50",children:"Maybe Later"}),(0,r.jsx)("button",{onClick:()=>eC("upgrade"),className:"px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600",children:"View Plans"})]})]})})]})}))}function u(){return(0,r.jsx)(i.Suspense,{fallback:(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}),children:(0,r.jsx)(x,{})})}},3494:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var r=t(3579),a=t(5695),i=t(2115);let l=()=>{let[e,s]=(0,i.useState)(null),[t,l]=(0,i.useState)(!0),n=(0,a.useRouter)(),o=(0,r.createClientComponentClient)();return(0,i.useEffect)(()=>{(async()=>{try{let{data:{user:e},error:t}=await o.auth.getUser();console.log("Auth check - Full user object:",e),console.log("User metadata:",null==e?void 0:e.user_metadata),s(e),l(!1)}catch(e){console.error("Auth error:",e),l(!1)}})();let{data:{subscription:e}}=o.auth.onAuthStateChange(async(e,t)=>{var r,a;console.log("Auth state changed:",e),console.log("Session user metadata:",null==t||null==(r=t.user)?void 0:r.user_metadata),s(null!=(a=null==t?void 0:t.user)?a:null),l(!1),"SIGNED_OUT"===e&&n.push("/auth/login")});return()=>e.unsubscribe()},[n,o]),{user:e,loading:t,signInWithGoogle:async()=>{try{console.log("Starting Google sign in...");let{data:e,error:s}=await o.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/account-type")}});if(s)throw console.error("Google sign in error:",s),s;return console.log("Google sign in initiated:",e),{data:e,error:null}}catch(e){return console.error("Google sign in failed:",e),{data:null,error:e}}},signInWithEmail:async(e,s)=>{let{data:t,error:r}=await o.auth.signInWithPassword({email:e,password:s});return{data:t,error:r}},signOut:async()=>{await o.auth.signOut(),n.push("/auth/login")},updateUserMetadata:async e=>{try{let{data:t,error:r}=await o.auth.updateUser({data:e});if(r)throw r;let{data:{user:a}}=await o.auth.getUser();return s(a),{data:t,error:null}}catch(e){return console.error("Error updating user metadata:",e),{data:null,error:e}}}}}},5570:(e,s,t)=>{Promise.resolve().then(t.bind(t,1230))},5695:(e,s,t)=>{"use strict";var r=t(8999);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})}},e=>{var s=s=>e(e.s=s);e.O(0,[3579,6874,8441,1684,7358],()=>s(5570)),_N_E=e.O()}]);