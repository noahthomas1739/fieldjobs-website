(()=>{var e={};e.id=1652,e.ids=[1652],e.modules={935:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/mattiebrooke/fieldjobs-website/app/auth/account-type/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/mattiebrooke/fieldjobs-website/app/auth/account-type/page.tsx","default")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7690:(e,t,r)=>{Promise.resolve().then(r.bind(r,9353))},9353:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(60687),o=r(7588),a=r(16189),i=r(43210),n=r(5745);function l(){let{user:e,loading:t}=(0,o.A)(),r=(0,a.useRouter)(),[l,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(!1),p=(0,n.createClientComponentClient)(),m=async e=>{c(!0);try{console.log("Setting account type to:",e);let{error:t}=await p.auth.updateUser({data:{account_type:e}});if(t){console.error("Error updating account type:",t),alert("Error setting account type. Please try again."),c(!1);return}console.log("Account type updated successfully!"),setTimeout(()=>{"employer"===e?r.push("/employer"):r.push("/dashboard")},500)}catch(e){console.error("Error:",e),alert("Something went wrong. Please try again."),c(!1)}};return t?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl mb-4",children:"â³"}),(0,s.jsx)("div",{children:"Loading..."})]})}):!e||e.user_metadata?.account_type?null:(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Welcome to FieldJobs!"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Choose your account type:"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("button",{onClick:()=>m("employer"),disabled:l,className:"w-full p-4 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Setting up...":"I'm an Employer"}),(0,s.jsx)("button",{onClick:()=>m("job_seeker"),disabled:l,className:"w-full p-4 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Setting up...":"I'm Looking for Work"})]}),(0,s.jsxs)("p",{className:"text-center text-sm text-gray-500",children:["Signed in as: ",e.email]})]})})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},46055:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(31658);let o=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},62197:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var s=r(65239),o=r(48088),a=r(88170),i=r.n(a),n=r(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let c={children:["",{children:["auth",{children:["account-type",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,935)),"/Users/mattiebrooke/fieldjobs-website/app/auth/account-type/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,32007)),"/Users/mattiebrooke/fieldjobs-website/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/mattiebrooke/fieldjobs-website/app/auth/account-type/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/auth/account-type/page",pathname:"/auth/account-type",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},89538:(e,t,r)=>{Promise.resolve().then(r.bind(r,935))},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4243,8605,1658,4758],()=>r(62197));module.exports=s})();