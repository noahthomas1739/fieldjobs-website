(()=>{var e={};e.id=2832,e.ids=[2832],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},34631:e=>{"use strict";e.exports=require("tls")},39727:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},47990:()=>{},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},74375:(e,r,s)=>{"use strict";s.r(r),s.d(r,{patchFetch:()=>g,routeModule:()=>l,serverHooks:()=>m,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>x});var t={};s.r(t),s.d(t,{GET:()=>p});var i=s(96559),o=s(48088),a=s(37719),u=s(32190),n=s(61223),c=s(44999);async function p(e){try{let r=(0,c.UL)(),s=(0,n.createRouteHandlerClient)({cookies:()=>r}),{searchParams:t}=new URL(e.url),i=t.get("keywords")||"",o=t.get("location")||"",a=t.get("classification")||"",p=t.get("specialization")||"",l=t.get("minExperience")||"",d=t.get("clearance")||"",x=t.get("minRate")||"";console.log("\uD83D\uDD0D Resume search parameters:",{keywords:i,location:o,classification:a,specialization:p,minExperience:l,clearance:d,minRate:x});let m=s.from("job_seeker_profiles").select("*").eq("resume_uploaded",!0).order("updated_at",{ascending:!1});if(i&&(m=m.or(`first_name.ilike.%${i}%,last_name.ilike.%${i}%,specialization.ilike.%${i}%,certifications.ilike.%${i}%,skills.cs.{${i}}`)),o&&(m=m.ilike("location",`%${o}%`)),a&&(m=m.eq("classification",a)),p&&(m=m.ilike("specialization",`%${p}%`)),l&&(m=m.gte("years_experience",parseInt(l))),"true"===d?m=m.eq("has_security_clearance",!0):"false"===d&&(m=m.eq("has_security_clearance",!1)),x){let e=x.match(/\d+/);if(e){let r=parseInt(e[0]);m=m.ilike("desired_rate",`%${r}%`)}}let{data:g,error:h}=await m.limit(50);if(h)return console.error("❌ Resume search error:",h),u.NextResponse.json({success:!1,error:"Failed to search resumes: "+h.message},{status:500});return console.log(`✅ Found ${g.length} matching profiles`),u.NextResponse.json({success:!0,profiles:g||[],count:g.length})}catch(e){return console.error("❌ Resume search server error:",e),u.NextResponse.json({success:!1,error:"Server error during resume search"},{status:500})}}let l=new i.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/resume-search/route",pathname:"/api/resume-search",filename:"route",bundlePath:"app/api/resume-search/route"},resolvedPagePath:"/Users/mattiebrooke/fieldjobs-website/app/api/resume-search/route.js",nextConfigOutput:"",userland:t}),{workAsyncStorage:d,workUnitAsyncStorage:x,serverHooks:m}=l;function g(){return(0,a.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:x})}},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[4243,131,2190],()=>s(74375));module.exports=t})();